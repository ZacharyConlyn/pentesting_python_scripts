#!/usr/bin/env python3

import paramiko
import argparse

def send_command(connection, cmd):
    _, stdout, stderr = connection.exec_command(cmd)
    print(stdout.channel.recv(1024).decode("utf-8"))


def connect(host, user, password):
    try:
        s  = paramiko.SSHClient()
        s.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        s.connect(host, username=user, password=password)
    except Exception as ex:
        print(f"[-] {ex}")
        exit(-1)
    return s

def main():
    parser = argparse.ArgumentParser()
    s = connect("localhost", "zach", "lzach")
    send_command(s, "cat /etc/passwd")


if __name__ == "__main__":
    main()
